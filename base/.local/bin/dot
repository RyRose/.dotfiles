#!/usr/bin/env -S uv run --script
# /// script
# dependencies = [
#     "typer",
# ]
# ///

import subprocess
from typing import Annotated
import typer
import os
from pathlib import Path

app = typer.Typer(no_args_is_help=True)


@app.command(help="Run make in the dotfiles directory on a target.")
def make(target: Annotated[str, typer.Argument()] = ""):
    os.chdir(Path.home() / ".dotfiles")
    if target:
        subprocess.run(["make", target])
    else:
        subprocess.run(["make"])


@app.command(help="Edit dotfiles in Neovim.")
def edit():
    os.chdir(Path.home() / ".dotfiles")
    subprocess.run(["nvim"])


if __name__ == "__main__":
    app()
